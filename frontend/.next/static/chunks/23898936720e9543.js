(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,86051,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"warnOnce",{enumerable:!0,get:function(){return o}});let o=e=>{}},41346,e=>{"use strict";e.s(["createPost",()=>r,"deletePost",()=>a,"getAllComments",()=>n,"getAllPosts",()=>o,"incrementPostLike",()=>l,"postComment",()=>i]);var t=e.i(23385),s=e.i(8399);let o=(0,s.createAsyncThunk)("post/getAllPosts",async(e,s)=>{try{let e=await t.clientServer.get("/posts");return s.fulfillWithValue(e.data)}catch(e){return s.rejectWithValue(e.response.data)}}),r=(0,s.createAsyncThunk)("post/createPost",async(e,s)=>{let{file:o,body:r}=e;try{let e=new FormData;e.append("token",localStorage.getItem("token")),e.append("body",r),e.append("media",o);let a=await t.clientServer.post("/post",e,{headers:{"Content-Type":"multipart/form-data"}});if(200===a.status)return s.fulfillWithValue("Post Uploaded");return s.rejectWithValue("Post not uploaded")}catch(e){return s.rejectWithValue(e.response.data)}}),a=(0,s.createAsyncThunk)("post/deletePost",async(e,s)=>{try{return await t.clientServer.delete("/delete_post",{data:{token:localStorage.getItem("token"),post_id:e.post_id}}),s.fulfillWithValue(e)}catch(e){return s.rejectWithValue("Something went wrong")}}),l=(0,s.createAsyncThunk)("post/incrementLike",async(e,s)=>{console.log("increment post like with :",e);try{let o=await t.clientServer.post("/increment_post_likes",{post_id:e.post_id});return s.fulfillWithValue(o.data)}catch(e){return s.rejectWithValue(e.response.data.message)}}),n=(0,s.createAsyncThunk)("post/getAllComments",async(e,s)=>{try{let o=await t.clientServer.get("/get_comments",{params:{post_id:e.post_id}});return s.fulfillWithValue({comments:o.data,post_id:e.post_id})}catch(e){return s.rejectWithValue("Something went wrong")}}),i=(0,s.createAsyncThunk)("post/postComment",async(e,s)=>{try{console.log({post_id:e.post_id,body:e.body});let o=await t.clientServer.post("/comment",{token:localStorage.getItem("token"),post_id:e.post_id,commentBody:e.body});return s.fulfillWithValue(o.data)}catch(e){return s.rejectWithValue("Something went wrong")}})},42369,e=>{"use strict";e.s(["default",()=>n,"resetPostId",()=>l]);var t=e.i(8399),s=e.i(41346);let o={posts:[],isError:!1,postFetched:!1,isLoading:!1,loggedIn:!1,message:"",comments:[],postId:""},r=(0,t.createSlice)({name:"post",initialState:o,reducers:{reset:()=>o,resetPostId:e=>{e.postId="",e.comments=[]}},extraReducers:e=>{e.addCase(s.getAllPosts.pending,e=>{e.isLoading=!0,e.message="Fetching all posts..."}).addCase(s.getAllPosts.fulfilled,(e,t)=>{e.isLoading=!1,e.isError=!1,e.postFetched=!0,console.log(t.payload.posts),e.posts=[...t.payload.posts].reverse(),console.log("HERE",e.posts),e.message="Posts fetched successfully!"}).addCase(s.getAllPosts.rejected,(e,t)=>{var s;e.isLoading=!1,e.isError=!0,e.message=(null==(s=t.error)?void 0:s.message)||"Failed to fetch posts."}).addCase(s.getAllComments.fulfilled,(e,t)=>{e.postId=t.payload.post_id,e.comments=t.payload.comments})}}),{reset:a,resetPostId:l}=r.actions,n=r.reducer},70103,e=>{"use strict";e.s(["default",()=>n],70103);var t=e.i(48277),s=e.i(79036),o=e.i(8399),r=e.i(59156),a=e.i(42369);let l=(0,o.configureStore)({reducer:{auth:r.default,postReducer:a.default}});function n(e){let{children:o}=e;return(0,t.jsx)("html",{lang:"en",children:(0,t.jsx)("body",{children:(0,t.jsx)(s.Provider,{store:l,children:o})})})}}]);